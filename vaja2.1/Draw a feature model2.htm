<!DOCTYPE html>
<!-- saved from url=(0070)https://evelance.de/online_feature_model_editor/featuremodeldrawer.htm -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <style type="text/css">
            body { margin:0;overflow:hidden; }
            #toolbar { position:fixed;top:10px;left:10px;padding:8px; }
            #toolbar p { margin:0 0 8px 0; }
            #toolbar p span { margin-left:8px; }
        </style>
        <title>Draw a feature model</title>
    </head>
    <body>
        <div id="toolbar">
            <p>
                <input type="button" value="Export SVG" id="export_svg">
                <input type="button" value="Export PNG" id="export_png">
                <span>Click empty space: create new box | Right click box: edit it | Double click other box during edit: (un-)connect them</span>
            </p>
            <div id="settings" style="display: none;">
                <input id="boxname" type="text">
                <select id="abstract"><option value="A">Abstract</option><option value="C">Concrete</option></select>
                <select id="child"><option value="C">Normal child</option><option value="M">Mandatory</option><option value="P">Optional</option></select>
                <select id="parent"><option value="A">And</option><option value="O">Or</option><option value="X">Alternative</option></select>
                <input id="delete" type="button" value="Delete">
            </div>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" id="model" width="2400px" height="1240px">
            <style>
                text { font:18px serif;user-select:none; }
                rect { fill:#eee;stroke:#afafaf;stroke-width:1px; }
                line { stroke:#555;stroke-width:2;stroke-linecap:round; }
                circle { stroke:#555;stroke-width:2;fill:#fff; }
                path { stroke:#555;fill:#555;stroke-width:2; }
            </style>
        <g><line x1="1184" y1="230.50001525878906" x2="1085" y2="338.2500305175781"></line><line x1="1184" y1="230.50001525878906" x2="1468" y2="404.2500305175781"></line><line x1="1184" y1="230.50001525878906" x2="1517" y2="251.25001525878906"></line><line x1="1184" y1="230.50001525878906" x2="1210" y2="342.25"></line><line x1="1210" y1="376.5" x2="1152" y2="745.2500610351562"></line><line x1="1210" y1="376.5" x2="1324" y2="601.25"></line><line x1="1210" y1="376.5" x2="1593" y2="732.25"></line><line x1="1152" y1="779.5000610351562" x2="1072" y2="1026.25"></line><line x1="1152" y1="779.5000610351562" x2="981" y2="927.25"></line><line x1="1152" y1="779.5000610351562" x2="1187" y2="890.2500610351562"></line><line x1="1072" y1="1060.5" x2="1032" y2="1133.25"></line><line x1="1072" y1="1060.5" x2="1107" y2="1133.25"></line><line x1="981" y1="961.5" x2="904" y2="989.2500610351562"></line><line x1="981" y1="961.5" x2="978" y2="1006.25"></line><line x1="1187" y1="924.5000610351562" x2="1166" y2="959.2500610351562"></line><line x1="1187" y1="924.5000610351562" x2="1229" y2="956.25"></line><line x1="1324" y1="635.5" x2="1302" y2="746.25"></line><line x1="1324" y1="635.5" x2="1416" y2="751.25"></line><line x1="1302" y1="780.5" x2="1257" y2="822.25"></line><line x1="1302" y1="780.5" x2="1332" y2="816.25"></line><line x1="1416" y1="785.5" x2="1459" y2="820.2500610351562"></line><line x1="1416" y1="785.5" x2="1400" y2="822.25"></line><line x1="1593" y1="766.5" x2="1416" y2="964.2500610351562"></line><line x1="1593" y1="766.5" x2="1585" y2="969.2500610351562"></line><line x1="1593" y1="766.5" x2="1740" y2="884.2500610351562"></line><line x1="1593" y1="766.5" x2="1839" y2="838.25"></line><line x1="1416" y1="998.5000610351562" x2="1443" y2="1043.25"></line><line x1="1416" y1="998.5000610351562" x2="1380" y2="1042.25"></line><line x1="1585" y1="1003.5000610351562" x2="1547" y2="1039.25"></line><line x1="1585" y1="1003.5000610351562" x2="1604" y2="1039.25"></line><line x1="1740" y1="918.5000610351562" x2="1791" y2="955.2500610351562"></line><line x1="1740" y1="918.5000610351562" x2="1703" y2="954.2500610351562"></line><line x1="1085" y1="372.5000305175781" x2="1043" y2="463.2500305175781"></line><line x1="1043" y1="497.5000305175781" x2="853" y2="551.25"></line><line x1="1043" y1="497.5000305175781" x2="1089" y2="572.25"></line><line x1="1043" y1="497.5000305175781" x2="943" y2="630.25"></line><line x1="853" y1="585.5" x2="776" y2="623.25"></line><line x1="853" y1="585.5" x2="821" y2="675.2500610351562"></line><line x1="1089" y1="606.5" x2="999" y2="706.25"></line><line x1="1089" y1="606.5" x2="1069" y2="696.25"></line><line x1="943" y1="664.5" x2="957" y2="784.2500610351562"></line><line x1="943" y1="664.5" x2="901" y2="773.25"></line><line x1="1572" y1="538.5000305175781" x2="1544" y2="592.25"></line><line x1="1572" y1="538.5000305175781" x2="1614" y2="589.25"></line><line x1="1468" y1="438.5000305175781" x2="1572" y2="504.2500305175781"></line><line x1="1517" y1="285.50001525878906" x2="1740" y2="328.2500305175781"></line><line x1="1517" y1="285.50001525878906" x2="1614" y2="328.2500305175781"></line><line x1="1517" y1="285.50001525878906" x2="1518" y2="330.25"></line><line x1="1468" y1="438.5000305175781" x2="1767" y2="509.2500305175781"></line><line x1="1767" y1="543.5000305175781" x2="1741" y2="585.25"></line><line x1="1767" y1="543.5000305175781" x2="1822" y2="582.25"></line><line x1="0" y1="6.5" x2="0" y2="-6.5"></line><line x1="0" y1="6.5" x2="0" y2="-6.5"></line><line x1="0" y1="6.5" x2="0" y2="-6.5"></line><line x1="0" y1="6.5" x2="0" y2="-6.5"></line><line x1="1019" y1="62.5" x2="993" y2="103.25"></line><line x1="1108" y1="59.50000190734863" x2="993" y2="103.25"></line><line x1="1248" y1="61.5" x2="993" y2="103.25"></line><line x1="1349" y1="60.9444465637207" x2="993" y2="103.25"></line><line x1="2091" y1="48.499996185302734" x2="993" y2="103.25"></line><line x1="2057" y1="123.5" x2="993" y2="103.25"></line><line x1="993" y1="137.5" x2="1184" y2="196.25001525878906"></line><line x1="993" y1="137.5" x2="543" y2="128.25"></line><line x1="993" y1="137.5" x2="2040" y2="142.25"></line><line x1="111" y1="225.50001525878906" x2="43" y2="251.25001525878906"></line><line x1="111" y1="225.50001525878906" x2="93" y2="285.25"></line><line x1="543" y1="162.5" x2="111" y2="191.25001525878906"></line><line x1="543" y1="162.5" x2="204" y2="294.25"></line><line x1="204" y1="328.5" x2="72" y2="380.25"></line><line x1="204" y1="328.5" x2="129" y2="422.25"></line><line x1="543" y1="162.5" x2="423" y2="399.2500305175781"></line><line x1="423" y1="433.5000305175781" x2="392" y2="487.25"></line><line x1="423" y1="433.5000305175781" x2="455" y2="485.25"></line><line x1="543" y1="162.5" x2="253" y2="429.2500305175781"></line><line x1="253" y1="463.5000305175781" x2="173" y2="639.2500610351562"></line><line x1="253" y1="463.5000305175781" x2="332" y2="638.25"></line><line x1="253" y1="463.5000305175781" x2="252" y2="640.2500610351562"></line><line x1="253" y1="463.5000305175781" x2="89" y2="584.25"></line><line x1="56" y1="781.5" x2="30" y2="865.2500610351562"></line><line x1="56" y1="781.5" x2="68" y2="920.2500610351562"></line><line x1="56" y1="781.5" x2="107" y2="868.25"></line><line x1="89" y1="618.5" x2="56" y2="747.25"></line><line x1="89" y1="618.5" x2="230" y2="862.25"></line><line x1="230" y1="896.5" x2="101" y2="1020.2500610351562"></line><line x1="230" y1="896.5" x2="265" y2="1018.25"></line><line x1="230" y1="896.5" x2="409" y2="1022.25"></line><line x1="230" y1="896.5" x2="551" y2="1024.25"></line><line x1="101" y1="1054.5000610351562" x2="60" y2="1167.25"></line><line x1="101" y1="1054.5000610351562" x2="141" y2="1171.25"></line><line x1="265" y1="1052.5" x2="222" y2="1153.25"></line><line x1="265" y1="1052.5" x2="315" y2="1156.25"></line><line x1="409" y1="1056.5" x2="385" y2="1153.25"></line><line x1="409" y1="1056.5" x2="454" y2="1152.25"></line><line x1="551" y1="1058.5" x2="523" y2="1153.25"></line><line x1="551" y1="1058.5" x2="602" y2="1144.25"></line><line x1="543" y1="162.5" x2="855" y2="214.25"></line><line x1="855" y1="248.5" x2="840" y2="362.25"></line><line x1="855" y1="248.5" x2="988" y2="287.25"></line><line x1="855" y1="248.5" x2="926" y2="364.2500305175781"></line><line x1="855" y1="248.5" x2="729" y2="304.25"></line><line x1="729" y1="338.5" x2="682" y2="419.2500305175781"></line><line x1="729" y1="338.5" x2="734" y2="481.25"></line><line x1="729" y1="338.5" x2="833" y2="479.2500305175781"></line><line x1="543" y1="162.5" x2="590" y2="448.2500305175781"></line><line x1="590" y1="482.5000305175781" x2="594" y2="699.2500610351562"></line><line x1="590" y1="482.5000305175781" x2="660" y2="799.2500610351562"></line><line x1="590" y1="482.5000305175781" x2="747" y2="807.25"></line><line x1="590" y1="482.5000305175781" x2="506" y2="683.25"></line><line x1="506" y1="717.5" x2="388" y2="792.25"></line><line x1="506" y1="717.5" x2="463" y2="797.25"></line><line x1="506" y1="717.5" x2="533" y2="800.2500610351562"></line></g><g><path visibility="hidden"></path><rect x="997" y="28.75" width="44.0078125" height="33.25" style=""></rect><text x="1005" y="51">title</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1061" y="25.750001907348633" width="95.98046875" height="33.25" style=""></rect><text x="1069" y="48">description</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1225" y="27" width="46.0234375" height="34" style=""></rect><text x="1233" y="50">host</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1327.0001220703125" y="28.444446563720703" width="44.99481964111328" height="32" style=""></rect><text x="1335" y="50">port</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="2062" y="14.75" width="59.984375" height="33.24999809265137" style=""></rect><text x="2070" y="37">theme</text><circle r="7" visibility="hidden" cx="1946" cy="90.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="2027" y="89.75" width="61.008697509765625" height="33.25" style=""></rect><text x="2035" y="112">layout</text><circle r="7" visibility="hidden" cx="1956" cy="104.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2212" y="251"></text><circle r="7" visibility="visible" cx="0" cy="-6.5" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="515" y="128.75" width="56.99609375" height="33.25" style=""></rect><text x="523" y="151">pages</text><circle r="7" visibility="visible" cx="543" cy="128.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="1133" y="196.75" width="102.9921875" height="33.25" style=""></rect><text x="1141" y="219">components</text><circle r="7" visibility="visible" cx="1184" cy="196.25001525878906" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="1173" y="342.75" width="74.0078125" height="33.25" style=""></rect><text x="1181" y="365">pop-ups</text><circle r="7" visibility="visible" cx="1210" cy="342.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="1051" y="338.7500305175781" width="68.01171875" height="33.25" style=""></rect><text x="1059" y="361">modals</text><circle r="7" visibility="visible" cx="1085" cy="338.2500305175781" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="1570" y="732.75" width="47.9921875" height="33.25" style=""></rect><text x="1578" y="755">alert</text><circle r="7" visibility="visible" cx="1593" cy="732.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="1440" y="404.75" width="56" height="33.25" style=""></rect><text x="1448" y="427">menu</text><circle r="7" visibility="visible" cx="1468" cy="404.2500305175781" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="1488" y="251.75" width="59.040008544921875" height="33.25" style=""></rect><text x="1496" y="274">footer</text><circle r="7" visibility="visible" cx="1517" cy="251.25001525878906" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="1271" y="601.75" width="107.99211120605469" height="33.25" style=""></rect><text x="1279" y="624">confirmation</text><circle r="7" visibility="visible" cx="1324" cy="601.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="1127" y="745.75" width="51.03318786621094" height="33.25" style=""></rect><text x="1135" y="768">error</text><circle r="7" visibility="visible" cx="1152" cy="745.2500610351562" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="visible" d="M 1072 1060.5 L 1085.0060882595421 1087.5340834537626 A 30 30 0 0 1 1057.545905505608 1086.7883843616755 Z"></path><rect x="1018" y="1026.75" width="108.02140808105469" height="33.25" style=""></rect><text x="1026" y="1049">show-header</text><circle r="7" visibility="visible" cx="1072" cy="1026.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="visible" d="M 981 961.5 L 978.9933309884333 991.4328127558707 A 30 30 0 0 1 952.7768908552399 971.6713376801165 Z"></path><rect x="937" y="927.75" width="89.984375" height="33.25" style=""></rect><text x="945" y="950">close-icon</text><circle r="7" visibility="visible" cx="981" cy="927.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="visible" d="M 1187 924.5000610351562 L 1210.93146799782 942.5910764701538 A 30 30 0 0 1 1171.4837116746014 950.1758238593276 Z"></path><rect x="1118" y="890.75" width="139.984375" height="33.25" style=""></rect><text x="1126" y="913">close-button-side</text><circle r="7" visibility="visible" cx="1187" cy="890.2500610351562" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="1011" y="1133.75" width="43.98828125" height="33.25" style=""></rect><text x="1019" y="1156">true</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1083" y="1133.75" width="49.984375" height="33.25" style=""></rect><text x="1091" y="1156">false</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="436" y="493"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="420" y="488"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="954.0000610351562" y="1006.75" width="49.984375" height="33.25" style=""></rect><text x="962" y="1029">false</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="883" y="989.7500610351562" width="43.98828125" height="33.25" style=""></rect><text x="891" y="1012">true</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1146" y="959.7500610351562" width="40.00390625" height="33.25" style=""></rect><text x="1154" y="982">left</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1204" y="956.75" width="50.013671875" height="33.25" style=""></rect><text x="1212" y="979">right</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="visible" d="M 1302 780.5 L 1321.2844537041442 803.4806406641051 A 30 30 0 0 1 1280.0074939744056 800.9041583681903 Z"></path><rect x="1248" y="746.75" width="108.02140808105469" height="33.25" style=""></rect><text x="1256" y="769">show-header</text><circle r="7" visibility="visible" cx="1302" cy="746.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="visible" d="M 1416 785.5 L 1439.333117531901 804.3564478691637 A 30 30 0 0 1 1404.0245339301568 813.0061486291709 Z"></path><rect x="1372" y="751.75" width="89.984375" height="33.25" style=""></rect><text x="1380" y="774">close-icon</text><circle r="7" visibility="visible" cx="1416" cy="751.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="1236" y="822.75" width="43.98828125" height="33.25" style=""></rect><text x="1244" y="845">true</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1308" y="816.75" width="49.984375" height="33.25" style=""></rect><text x="1316" y="839">false</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1438" y="820.75" width="43.98828125" height="33.25" style=""></rect><text x="1446" y="843">true</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1376.0001220703125" y="822.75" width="49.984375" height="33.25" style=""></rect><text x="1384" y="845">false</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="visible" d="M 1416 998.5000610351562 L 1431.4981507939497 1024.186775927645 A 30 30 0 0 1 1396.9380479545478 1021.6655954390261 Z"></path><rect x="1362" y="964.7500610351562" width="108.02133178710938" height="33.25" style=""></rect><text x="1370" y="987">show-header</text><circle r="7" visibility="visible" cx="1416" cy="964.2500610351562" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="visible" d="M 1585 1003.5000610351562 L 1599.0791902239137 1029.9911237288054 A 30 30 0 0 1 1563.149762938351 1024.0564989646648 Z"></path><rect x="1541.0001220703125" y="969.7500610351562" width="89.984375" height="33.25" style=""></rect><text x="1549" y="992">close-icon</text><circle r="7" visibility="visible" cx="1585" cy="969.2500610351562" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="visible" d="M 1740 918.5000610351562 L 1764.3392394398932 936.03863063155 A 30 30 0 0 1 1718.4254929713638 939.3456995830953 Z"></path><rect x="1671.0001220703125" y="884.7500610351562" width="139.984375" height="33.25" style=""></rect><text x="1679" y="907">close-button-side</text><circle r="7" visibility="visible" cx="1740" cy="884.2500610351562" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="1801.0001220703125" y="838.75" width="76" height="33.25" style=""></rect><text x="1809" y="861">duration</text><circle r="7" visibility="visible" cx="1839" cy="838.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="1422" y="1043.75" width="43.98828125" height="33.25" style=""></rect><text x="1430" y="1066">true</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1526.0001220703125" y="1039.75" width="43.98828125" height="33.25" style=""></rect><text x="1534" y="1062">true</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1356.0001220703125" y="1042.75" width="49.984375" height="33.25" style=""></rect><text x="1364" y="1065">false</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1580" y="1039.75" width="49.984375" height="33.25" style=""></rect><text x="1588" y="1062">false</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1683" y="954.7500610351562" width="40.00390625" height="33.25" style=""></rect><text x="1691" y="977">left</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1766.0001220703125" y="955.75" width="50.013519287109375" height="33.25" style=""></rect><text x="1774" y="978">right</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1012" y="463.7500305175781" width="63.01171875" height="33.25" style=""></rect><text x="1020" y="486">profile</text><circle r="7" visibility="visible" cx="1043" cy="463.2500305175781" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="visible" d="M 853 585.5 L 842.924874418469 613.7575979962271 A 30 30 0 0 1 826.0630561094858 598.7060991151546 Z"></path><rect x="796" y="551.75" width="115.98046875" height="33.25" style=""></rect><text x="804" y="574">dummyImage</text><circle r="7" visibility="visible" cx="853" cy="551.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="visible" d="M 943 664.5 L 946.4835791394197 694.2970581833073 A 30 30 0 0 1 932.1918384107718 692.4854184006803 Z"></path><rect x="865" y="630.75" width="157.953125" height="33.25" style=""></rect><text x="873" y="653">allow-delete-profile</text><circle r="7" visibility="visible" cx="943" cy="630.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="visible" d="M 1089 606.5 L 1082.4748148484307 635.7817683676676 A 30 30 0 0 1 1068.903315749149 628.7738250446931 Z" style=""></path><rect x="1035" y="572.75" width="108.021484375" height="33.25" style=""></rect><text x="1043" y="595">show-header</text><circle r="7" visibility="visible" cx="1089" cy="572.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="755" y="623.75" width="43.98828125" height="33.25" style=""></rect><text x="763" y="646">true</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="797" y="675.75" width="49.984375" height="33.25" style=""></rect><text x="805" y="698">false</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="978" y="706.75" width="43.98828125" height="33.25" style=""></rect><text x="986" y="729">true</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1045" y="696.75" width="49.984375" height="33.25" style=""></rect><text x="1053" y="719">false</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="936" y="784.7500610351562" width="43.98828125" height="33.25" style=""></rect><text x="944" y="807">true</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="877" y="773.75" width="49.984375" height="33.25" style=""></rect><text x="885" y="796">false</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="visible" d="M 1572 538.5000305175781 L 1591.1270382473656 561.6118545019333 A 30 30 0 0 1 1558.139933280743 565.1063934884493 Z"></path><rect x="1526.0001220703125" y="504.75" width="92.015625" height="33.25" style=""></rect><text x="1534" y="527">show-logo</text><circle r="7" visibility="visible" cx="1572" cy="504.2500305175781" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="1523" y="592.75" width="43.98828125" height="33.25" style=""></rect><text x="1531" y="615">true</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1590" y="589.75" width="49.984375" height="33.25" style=""></rect><text x="1598" y="612">false</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1668" y="328.7500305175781" width="144.01254272460938" height="33.25" style=""></rect><text x="1676" y="351">background-color</text><circle r="7" visibility="visible" cx="1740" cy="328.2500305175781" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="1584" y="328.7500305175781" width="61.00885009765625" height="33.25" style=""></rect><text x="1592" y="351">height</text><circle r="7" visibility="visible" cx="1614" cy="328.2500305175781" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="1484" y="330.75" width="68.998046875" height="33.25" style=""></rect><text x="1492" y="353">content</text><circle r="7" visibility="visible" cx="1518" cy="330.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="1711.0001220703125" y="413.7500305175781" width="49.984375" height="33.25" style=""></rect><text x="1719" y="436">false</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="visible" d="M 1767 543.5000305175781 L 1791.5244794009027 560.7786273968012 A 30 30 0 0 1 1751.1411647715681 568.9656415488777 Z"></path><rect x="1744" y="509.75" width="46.99609375" height="33.25" style=""></rect><text x="1752" y="532">type</text><circle r="7" visibility="visible" cx="1767" cy="509.2500305175781" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="1710" y="585.75" width="62.04583740234375" height="33.25" style=""></rect><text x="1718" y="608">topbar</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="1788" y="582.75" width="68.03994750976562" height="33.25" style=""></rect><text x="1796" y="605">sidebar</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2253" y="40"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2241" y="62"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2312" y="124"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2331" y="165"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2332" y="211"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2333" y="254"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2008" y="361"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="1950" y="245"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="1953" y="302"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2163" y="152"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="1957" y="375"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2059" y="221"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2157" y="380"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2042" y="278"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2097" y="318"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2111" y="363"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2218" y="369"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2206" y="279"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2214" y="326"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2228" y="421"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="-8" y="-6" width="16" height="12" style=""></rect><text x="2118" y="417"></text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="971" y="103.75" width="45.01268005371094" height="33.25" style=""></rect><text x="979" y="126">root</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="2022" y="142.75" width="37.9921875" height="33.25" style=""></rect><text x="2030" y="165">api</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="81.00000762939453" y="191.75" width="61.017555236816406" height="33.25" style=""></rect><text x="89" y="214">About</text><circle r="7" visibility="visible" cx="111" cy="191.25001525878906" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="149" y="294.75" width="111.01953887939453" height="33.25" style=""></rect><text x="157" y="317">ReportFound</text><circle r="7" visibility="visible" cx="204" cy="294.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="375" y="399.75" width="97.00872039794922" height="33.25" style=""></rect><text x="383" y="422">ReportLost</text><circle r="7" visibility="visible" cx="423" cy="399.2500305175781" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="25" y="251.75" width="36.00000190734863" height="33.25" style=""></rect><text x="33" y="274">url</text><circle r="7" visibility="visible" cx="43" cy="251.25001525878906" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="71" y="285.75" width="44.007808685302734" height="33.25" style=""></rect><text x="79" y="308">title</text><circle r="7" visibility="visible" cx="93" cy="285.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="106.00000762939453" y="422.75" width="46.02341270446777" height="33.25" style=""></rect><text x="114" y="445">post</text><circle r="7" visibility="visible" cx="129" cy="422.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="54.000003814697266" y="380.75" width="36.000003814697266" height="33.25" style=""></rect><text x="62" y="403">url</text><circle r="7" visibility="visible" cx="72" cy="380.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="374" y="487.75" width="36" height="33.25" style=""></rect><text x="382" y="510">url</text><circle r="7" visibility="visible" cx="392" cy="487.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="432" y="485.75" width="46.02342224121094" height="33.25" style=""></rect><text x="440" y="508">post</text><circle r="7" visibility="visible" cx="455" cy="485.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="223" y="429.75" width="60.00390625" height="33.25" style=""></rect><text x="231" y="452">Home</text><circle r="7" visibility="visible" cx="253" cy="429.2500305175781" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="155.00001525878906" y="639.7500610351562" width="36" height="33.25" style=""></rect><text x="163" y="662">url</text><circle r="7" visibility="visible" cx="173" cy="639.2500610351562" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="310" y="638.75" width="44.00783157348633" height="33.25" style=""></rect><text x="318" y="661">title</text><circle r="7" visibility="visible" cx="332" cy="638.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="218" y="640.75" width="68.99802780151367" height="33.25" style=""></rect><text x="226" y="663">content</text><circle r="7" visibility="visible" cx="252" cy="640.2500610351562" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="41" y="584.75" width="96.99609375" height="33.25" style=""></rect><text x="49" y="607">quickLinks</text><circle r="7" visibility="visible" cx="89" cy="584.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="visible" d="M 56 781.5 L 71.20408913722966 807.3618575030329 A 30 30 0 0 1 47.10533943651392 810.1510909645752 Z"></path><rect x="31" y="747.75" width="51" height="33.25" style=""></rect><text x="39" y="770">view</text><circle r="7" visibility="visible" cx="56" cy="747.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="205.00001525878906" y="862.75" width="51.01953125" height="33.25" style=""></rect><text x="213" y="885">links</text><circle r="7" visibility="visible" cx="230" cy="862.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="8" y="865.75" width="45.00390625" height="33.25" style=""></rect><text x="16" y="888">grid</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="43" y="920.75" width="50.980472564697266" height="33.25" style=""></rect><text x="51" y="943">table</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="88" y="868.75" width="38.02536582946777" height="33.25" style=""></rect><text x="96" y="891">list</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="37" y="1020.75" width="129.984375" height="33.25" style=""></rect><text x="45" y="1043">ReportLostItem</text><circle r="7" visibility="visible" cx="101" cy="1020.2500610351562" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="194" y="1018.75" width="143.98828125" height="33.25" style=""></rect><text x="202" y="1041">ReportFoundItem</text><circle r="7" visibility="visible" cx="265" cy="1018.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="355" y="1022.75" width="108.98828125" height="33.25" style=""></rect><text x="363" y="1045">ListLostItem</text><circle r="7" visibility="visible" cx="409" cy="1022.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="490" y="1024.75" width="123.01171875" height="33.25" style=""></rect><text x="498" y="1047">ListFoundItem</text><circle r="7" visibility="visible" cx="551" cy="1024.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="38" y="1167.75" width="44.0078125" height="33.25" style=""></rect><text x="46" y="1190">link</text><circle r="7" visibility="visible" cx="60" cy="1167.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="120" y="1171.75" width="43.008771896362305" height="33.25" style=""></rect><text x="128" y="1194">text</text><circle r="7" visibility="visible" cx="141" cy="1171.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="200.00001525878906" y="1153.75" width="44.0078125" height="33.25" style=""></rect><text x="208" y="1176">link</text><circle r="7" visibility="visible" cx="222" cy="1153.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="363.0000305175781" y="1153.75" width="44.0078125" height="33.25" style=""></rect><text x="371" y="1176">link</text><circle r="7" visibility="visible" cx="385" cy="1153.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="501" y="1153.75" width="44.0078125" height="33.25" style=""></rect><text x="509" y="1176">link</text><circle r="7" visibility="visible" cx="523" cy="1153.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="294" y="1156.75" width="43.00878143310547" height="33.25" style=""></rect><text x="302" y="1179">text</text><circle r="7" visibility="visible" cx="315" cy="1156.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="433.0000305175781" y="1152.75" width="43.00878143310547" height="33.25" style=""></rect><text x="441" y="1175">text</text><circle r="7" visibility="visible" cx="454" cy="1152.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="581" y="1144.75" width="43.00878143310547" height="33.25" style=""></rect><text x="589" y="1167">text</text><circle r="7" visibility="visible" cx="602" cy="1144.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="812" y="214.75" width="87.9921875" height="33.25" style=""></rect><text x="820" y="237">LostItems</text><circle r="7" visibility="visible" cx="855" cy="214.25" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="808" y="362.75" width="64.02345275878906" height="33.25" style=""></rect><text x="816" y="385">header</text><circle r="7" visibility="visible" cx="840" cy="362.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="908" y="364.75" width="36" height="33.25" style=""></rect><text x="916" y="387">url</text><circle r="7" visibility="visible" cx="926" cy="364.2500305175781" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="966" y="287.75" width="45.98046875" height="33.25" style=""></rect><text x="974" y="310">data</text><circle r="7" visibility="visible" cx="988" cy="287.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="visible" d="M 729 338.5 L 746.8281141351007 362.6279577748682 A 30 30 0 0 1 713.9088355837512 364.42791462038053 Z"></path><rect x="704.0000610351562" y="304.75" width="51" height="33.25" style=""></rect><text x="712" y="327">view</text><circle r="7" visibility="visible" cx="729" cy="304.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="663" y="419.75" width="38.02537536621094" height="33.25" style=""></rect><text x="671" y="442">list</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="709.0000610351562" y="481.75" width="50.98046875" height="33.25" style=""></rect><text x="717" y="504">table</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="811" y="479.75" width="45.00390625" height="33.25" style=""></rect><text x="819" y="502">grid</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="539" y="448.7500305175781" width="102.015625" height="33.25" style=""></rect><text x="547" y="471">FoundItems</text><circle r="7" visibility="visible" cx="590" cy="448.2500305175781" style="fill: rgb(255, 255, 255);"></circle></g><g><path visibility="hidden"></path><rect x="628" y="799.7500610351562" width="64.0234146118164" height="33.25" style=""></rect><text x="636" y="822">header</text><circle r="7" visibility="visible" cx="660" cy="799.2500610351562" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="576" y="699.7500610351562" width="36" height="33.25" style=""></rect><text x="584" y="722">url</text><circle r="7" visibility="visible" cx="594" cy="699.2500610351562" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="725" y="807.75" width="45.98046875" height="33.25" style=""></rect><text x="733" y="830">data</text><circle r="7" visibility="visible" cx="747" cy="807.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="visible" d="M 506 717.5 L 515.3056909320378 746.0202404666825 A 30 30 0 0 1 480.65704588162555 733.5541171215974 Z"></path><rect x="481" y="683.75" width="51" height="33.25" style=""></rect><text x="489" y="706">view</text><circle r="7" visibility="visible" cx="506" cy="683.25" style="fill: rgb(136, 136, 136);"></circle></g><g><path visibility="hidden"></path><rect x="363.0000305175781" y="792.75" width="50.98046875" height="33.25" style=""></rect><text x="371" y="815">table</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="441" y="797.75" width="45.00390625" height="33.25" style=""></rect><text x="449" y="820">grid</text><circle r="7" visibility="hidden"></circle></g><g><path visibility="hidden"></path><rect x="514" y="800.75" width="38.02537536621094" height="33.25" style=""></rect><text x="522" y="823">list</text><circle r="7" visibility="hidden"></circle></g></svg>
        <script type="text/javascript">
            const floor = Math.floor.bind(Math);
            const id = document.getElementById.bind(document);
            const svgatt = function(element, attributes) {
                for (var prop in attributes)
                    element.setAttribute(prop, attributes[prop]);
            };
            const svgel = function(name, attributes) {
                var el = document.createElementNS("http://www.w3.org/2000/svg", name);
                if (attributes != undefined)
                    svgatt(el, attributes);
                return el;
            };
            
            /* SVG image containing one group with all lines and zero or more groups representing boxes */
            const svg = id("model");
            const lines = svgel("g");
            svg.appendChild(lines);
            
            var cancel_space_click = false; /* Click events seem to be uncancelable from SVG sub-elements */
            var cancel_space_click_function = function() { cancel_space_click = true; };
            
            
            /* Input elements for box editing */
            const settings = id("settings");
            const settings_name = id("boxname");
            const settings_abstract = id("abstract");
            const settings_child = id("child");
            const settings_parent = id("parent");
            const settings_delete = id("delete");
            const CHILD_NORMAL = "C", CHILD_MANDATORY = "M", CHILD_OPTIONAL = "P";
            const PARENT_NORMAL = "A", PARENT_OR = "O", PARENT_ALTERNATIVE = "X";
            
            /* Box management */
            var all_boxes = [];
            var create_box = function(description, x, y) {
                var box = create_box_element(description, x, y, false, CHILD_NORMAL, PARENT_NORMAL);
                box.g.onclick = cancel_space_click_function;
                box.g.ondblclick = function() { box_doubleclick(box); };
                box.g.onmousedown = function(ev) { box_start_move(box, ev); };
                box.g.oncontextmenu = function() { cancel_space_click = false; box_editmode(box); };
                box_update_complete(box);
                all_boxes.push(box);
                return box;
            };
            var create_box_element = function(description, x, y, concrete, childstyle, parentstyle) {
                var g = svgel("g");              /* Logical box group */
                var t = svgel("text");           /* Text field (determines box size) */
                var r = svgel("rect");           /* Bordered box */
                var c = svgel("circle", {r: 7}); /* Child type indicator (dot) */
                var p = svgel("path");           /* Parent type indicator (arc) */
                t.appendChild(document.createTextNode(description));
                g.appendChild(p);
                g.appendChild(r);
                g.appendChild(t);
                g.appendChild(c);
                svg.appendChild(g);
                return box = { x: x, y: y, g: g, t: t, r: r, c: c, p: p, conns: [], concrete: concrete, childstyle: childstyle, parentstyle: parentstyle };
            };
            var pad = { x: 8, y: 6};
            var box_update_complete = function(box) {
                /* Update text first, then use the bounding box of text to update the background */
                var tbb = box.t.getBBox();
                svgatt(box.t, {x: box.x - floor(tbb.width / 2), y: box.y -floor(tbb.height / 4) });
                tbb = box.t.getBBox();
                svgatt(box.r, {x: tbb.x - pad.x, y: tbb.y - pad.y, width: tbb.width + pad.x * 2, height: tbb.height + pad.y * 2});
                /* Update connected lines */
                box_update_visual(box);
                for (var i in box.conns) {
                    var conn = box.conns[i];
                    box_update_visual((box == conn.box1) ? conn.box2 : conn.box1);
                }
            };
            var parent_arc_r = 30;
            var box_update_visual = function(box) {
                var bb = box.r.getBBox();
                var has_parents = false, num_children = 0;
                var min_angle = Math.PI, max_angle = -Math.PI;
                for (var i in box.conns) {
                    var conn = box.conns[i];
                    var parent_box, child_box, pbb, cbb;
                    if (conn.box1.y < conn.box2.y) {
                        parent_box = conn.box1, child_box = conn.box2;
                    } else {
                        parent_box = conn.box2, child_box = conn.box1;
                    }
                    pbb = parent_box.r.getBBox();
                    cbb = child_box.r.getBBox();
                    var px = floor(pbb.x + pbb.width / 2), py = pbb.y + pbb.height + 0.5;
                    var cx = floor(cbb.x + cbb.width / 2), cy = cbb.y - 0.5;
                    svgatt(conn.ln, { x1: px, y1: py, x2: cx, y2: cy });
                    if (box == parent_box) {
                        var angle = Math.atan2(cx - px, cy - py);
                        if (angle < min_angle) min_angle = angle;
                        if (angle > max_angle) max_angle = angle;
                        ++num_children;
                    } else {
                        has_parents = true;
                    }
                }
                box.r.style.fill = box.concrete ? "#ccc" : null;
                if (box.childstyle != CHILD_NORMAL && has_parents) {
                    box.c.style.fill = (box.childstyle == CHILD_MANDATORY) ? "#888" : "#fff";
                    svgatt(box.c, {visibility: "visible", cx: floor(bb.x + bb.width / 2), cy: bb.y - 0.5});
                } else {
                    svgatt(box.c, {visibility: "hidden"});
                }
                if (box.parentstyle != PARENT_NORMAL && num_children >= 2) {
                    box.p.style.fill = (box.parentstyle == PARENT_OR) ? null : "none";
                    var sx = floor(bb.x + bb.width / 2), sy = bb.y + bb.height + 0.5;         /* Center bottom */
                    var lx = sx + parent_arc_r * Math.sin(max_angle), ly = sy + parent_arc_r * Math.cos(max_angle); /* Left starting point */
                    var rx = sx + parent_arc_r * Math.sin(min_angle), ry = sy + parent_arc_r * Math.cos(min_angle); /* Right ending point */
                    var draw = "M "+sx+" "+sy+" L "+lx+" "+ly+" A "+parent_arc_r+" "+parent_arc_r+" 0 0 1 "+rx+" "+ry+" Z";
                    svgatt(box.p, {visibility: "visible", d: draw});
                } else {
                    svgatt(box.p, {visibility: "hidden"});
                }
            };
            var box_doubleclick = function(box) {
                if (edited_box == null || edited_box == box)
                    return;
                box_connect_toggle(box, edited_box);
            };
            var box_connect_toggle = function(box_a, box_b) {
                /* Delete if they are already connected */
                var removed_connection = false;
                for (var i in box_a.conns) {
                    var conn = box_a.conns[i];
                    if (conn.box1 == box_b || conn.box2 == box_b) {
                        if (conn.ln != null) {
                            lines.removeChild(conn.ln);
                            conn.ln = null;
                        }
                        box_a.conns.splice(i, 1);
                        removed_connection = true;
                        break;
                    }
                }
                for (var i in box_b.conns) {
                    var conn = box_b.conns[i];
                    if (conn.box1 == box_a || conn.box2 == box_a) {
                        if (conn.ln != null) {
                            lines.removeChild(conn.ln);
                            conn.ln = null;
                        }
                        box_b.conns.splice(i, 1);
                        removed_connection = true;
                        break;
                    }
                }
                if (!removed_connection) {
                    var ln = svgel("line");
                    lines.appendChild(ln);
                    var conn = { ln: ln, box1: box_a, box2: box_b };
                    box_a.conns.push(conn);
                    box_b.conns.push(conn);
                }
                box_update_visual(box_a);
                box_update_visual(box_b);
            };
            var box_moving = null;
            var box_clickoff = null;
            var box_start_move = function(box, ev) {
                if (box_moving != null)
                    return;
                box_moving = box;
                window.addEventListener("mousemove", box_move_step);
                window.addEventListener("mouseup", box_move_stop);
                cancel_space_click = true;
                /* Offset in the box to avoid jumping of the box */
                box_clickoff = { x: ev.clientX - svg_left - box.x, y: ev.clientY - svg_top - box.y };
            };
            var box_move_step = function(ev) {
                if (box_moving == null)
                    return;
                var x = ev.clientX - svg_left, y = ev.clientY - svg_top;
                box_moving.x = x - box_clickoff.x, box_moving.y = y - box_clickoff.y;
                box_update_complete(box_moving);
            };
            var box_move_stop = function(ev) {
                window.removeEventListener("mousemove", box_move_step);
                window.removeEventListener("mouseup", box_move_stop);
                box_moving = null;
            };
            var box_delete = function(box) {
                while (box.conns.length > 0) {
                    var conn = box.conns[0];
                    box_connect_toggle(conn.box1, conn.box2);
                }
                svg.removeChild(box.g);
                for (var i in all_boxes)
                    if (all_boxes[i] == box)
                        all_boxes.splice(i, 1);
            };
            var edited_box = null;
            var box_stop_editmode = function() {
                settings.style.display = "none";
                settings_name.oninput = null;
                settings_abstract.onchange = null;
                settings_child.onchange = null;
                settings_parent.onchange = null;
                settings_delete.onclick = null;
                edited_box = null;
            };
            var box_editmode = function(box) {
                if (edited_box != null) {
                    edited_box.r.style.stroke = null;
                    if (edited_box == box) {
                        box_stop_editmode();
                        return;
                    }
                }
                /* Start edit mode for given box */
                box.r.style.stroke = "#06f";
                edited_box = box;
                settings.style.display = "block"
                settings_name.value = box.t.firstChild.textContent;
                settings_name.oninput = function(ev) {
                    box.t.firstChild.textContent = settings_name.value;
                    box_update_complete(box);
                };
                settings_abstract.value = box.concrete ? "C" : "A";
                settings_abstract.onchange = function(ev) {
                    box.concrete = (settings_abstract.value == "C");
                    box_update_visual(box);
                };
                settings_child.value = box.childstyle;
                settings_child.onchange = function(ev) {
                    box.childstyle = settings_child.value;
                    box_update_visual(box);
                };
                settings_parent.value = box.parentstyle;
                settings_parent.onchange = function(ev) {
                    box.parentstyle = settings_parent.value;
                    box_update_visual(box);
                };
                settings_delete.onclick = function(ev) {
                    box_delete(box);
                    box_stop_editmode();
                };
                settings_name.focus();
                settings_name.select();
            };
            
            /* Click on the empty space to create new boxes */
            var space_clicked = function(ev) {
                if (cancel_space_click) {
                    cancel_space_click = false;
                    return;
                }
                var x = ev.clientX - svg_left, y = ev.clientY - svg_top;
                var box = create_box("Box name", x, y + 10);
                box_editmode(box);
            };
            svg.addEventListener("click", space_clicked);
            
            /* Update SVG size so that it fills the entire screen */
            var svg_top, svg_left;
            var update_svg_pos = function() {
                var bb = svg.getBoundingClientRect();
                svg_top  = bb.top;
                svg_left = bb.left;
            };
            var fit_screen_size = function() {
                svg.setAttribute("width", floor(window.innerWidth) + "px");
                svg.setAttribute("height", floor(window.innerHeight) + "px");
                update_svg_pos();
            };
            window.addEventListener("resize", fit_screen_size);
            
            /* SVG subelements can't cancel default action... need to disable it for entire SVG */
            svg.oncontextmenu = function(ev) { ev.preventDefault(); };
            
            /* Export options */
            var create_exported_svg = function() {
                /* Find area with elements */
                var dim = { left: parseInt(svg.getAttribute("width")), right: 0, top: parseInt(svg.getAttribute("height")), bottom: 0 };
                for (var i in all_boxes) {
                    var box = all_boxes[i];
                    var bb = box.r.getBBox();
                    if (bb.x < dim.left)
                        dim.left = bb.x;
                    if (bb.x + bb.width > dim.right)
                        dim.right = bb.x + bb.width;
                    if (bb.y < dim.top)
                        dim.top = bb.y;
                    if (bb.y + bb.height > dim.bottom)
                        dim.bottom = bb.y + bb.height;
                }
                var pad_area = 10;
                var translate_x = dim.left - pad_area, translate_y = dim.top - pad_area;
                var new_w = (dim.right - dim.left) + 2 * pad_area, new_h = (dim.bottom - dim.top) + 2 * pad_area;
                /* Create new SVG with appropriate size and copy style */
                var new_svg = svgel("svg", { width: new_w, height: new_h, xmlns: "http://www.w3.org/2000/svg" });
                for (var i in svg.childNodes) {
                    if (svg.childNodes[i].tagName == "style") {
                        new_svg.appendChild(svg.childNodes[i].cloneNode(true));
                        break;
                    }
                }
                var new_lines = svgel("g");
                new_svg.appendChild(new_lines);
                /* Recreate all boxes */
                var translate_boxes = [];
                for (var i in all_boxes) {
                    var box = all_boxes[i];
                    var new_box = create_box_element(box.t.firstChild.textContent, box.x - translate_x, box.y - translate_y, box.concrete, box.childstyle, box.parentstyle);
                    translate_boxes[i] = new_box;
                    new_svg.appendChild(new_box.g);
                }
                /* Recreate connections */
                var old_conns = [];
                var new_conns = [];
                for (var i in all_boxes) {
                    var box = all_boxes[i];
                    var new_box = translate_boxes[i];
                    for (var j in box.conns) {
                        var conn = box.conns[j];
                        var oci = old_conns.indexOf(conn);
                        if (oci < 0) {
                            old_conns.push(conn);
                            var box2 = (box == conn.box1) ? conn.box2 : conn.box1;
                            new_box2 = translate_boxes[all_boxes.indexOf(box2)];
                            var ln = svgel("line");
                            new_lines.appendChild(ln);
                            new_conn = { ln: ln, box1: new_box, box2: new_box2 };
                            new_conns.push(new_conn);
                            new_box.conns.push(new_conn);
                        } else {
                            new_box.conns.push(new_conns[oci]);
                        }
                    }
                }
                /* Insert temporarily to actual DOM, update all new elements, and remove it again */
                document.body.appendChild(new_svg);
                for (var i in all_boxes) {
                    box_update_complete(translate_boxes[i]);
                }
                document.body.removeChild(new_svg);
                return { w: new_w, h: new_h, data: URL.createObjectURL(new Blob([new_svg.outerHTML], {type: "image/svg+xml;charset=utf-8"})) };
            };
            id("export_svg").addEventListener("click", function() {
                if (all_boxes.length == 0) {
                    alert("Nothing to export.");
                    return;
                }
                var expsvg = create_exported_svg();
                var link = document.createElement("a");
                link.href = expsvg.data;
                link.download = "feature_model.svg";
                link.click();
            });
            id("export_png").addEventListener("click", function() {
                if (all_boxes.length == 0) {
                    alert("Nothing to export.");
                    return;
                }
                var expsvg = create_exported_svg();
                var canv = document.createElement("canvas");
                canv.width = expsvg.w;
                canv.height = expsvg.h;
                var img = new Image();
                img.onload = function () {
                    var ctx = canv.getContext("2d");
                    ctx.clearRect(0, 0, expsvg.w, expsvg.h);
                    ctx.drawImage(img, 0, 0);
                    var link = document.createElement("a");
                    link.href = canv.toDataURL("image/png");
                    link.download = "feature_model.png";
                    link.click();
                };
                img.src = expsvg.data;
            });
            
            /* Let's go ! */
            fit_screen_size();
            box_stop_editmode();
        </script>
    
</body></html>